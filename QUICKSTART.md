# クイックスタートガイド

## 🚀 すぐに始める

### 1. アプリの起動

```bash
streamlit run structural_analysis_app.py
```

ブラウザが自動で開き、アプリが表示されます。

### 2. 基本的な使い方

#### ステップ1: 画像をアップロード
- 「📷 構造図画像をアップロード」ボタンをクリック
- 手書きの構造図画像を選択（PNG, JPG, JPEG対応）

#### ステップ2: パラメータ調整（オプション）
サイドバーで以下を調整できます：
- **検出信頼度**: 要素検出の感度（デフォルト: 0.45）
- **高さ揃え閾値**: 支点のy座標を揃える範囲（デフォルト: 8px）
- **接続閾値**: 梁と支点を接続する距離（デフォルト: 25px）
- **材料特性**: ヤング係数、断面積、断面二次モーメント
- **荷重設定**: 各種荷重の大きさ

#### ステップ3: 解析実行
- 「🚀 解析実行」ボタンをクリック
- 数秒で結果が表示されます

#### ステップ4: 結果の確認
以下のタブで結果を確認できます：
- **節点情報**: 検出された節点の座標
- **部材情報**: 梁の長さ、角度、材料特性
- **荷重・拘束条件**: 適用された荷重と支点条件
- **変位・反力**: 各節点の変位と反力
- **変形図**: 構造の変形を可視化
- **応力図**: 軸力(N)、せん断力(Q)、曲げモーメント(M)

## 📝 手書き図面の描き方のコツ

### 良い例
✅ 線を明瞭に描く
✅ 要素同士を適度に離す
✅ 支点と梁を接触させる
✅ 荷重を梁の上に配置

### 避けるべき例
❌ 線が薄すぎる・細すぎる
❌ 要素が重なりすぎている
❌ 支点と梁が離れすぎている
❌ 複雑すぎる構造

## 🎯 サンプル構造

### 単純梁（集中荷重）
```
支点(ピン) ----梁---- 支点(ローラー)
              ↓
            荷重
```

### 片持ち梁
```
支点(固定) ----梁----
                    ↓
                  荷重
```

### ラーメン構造
```
    ----梁----
    |        |
   梁        梁
    |        |
  固定      固定
```

## ⚙️ 推奨設定

### 初学者向け
- 検出信頼度: 0.40-0.50
- 高さ揃え閾値: 10px
- 接続閾値: 30px

### 複雑な構造
- 検出信頼度: 0.50-0.60（誤検出を減らす）
- 高さ揃え閾値: 5px（厳密に）
- 接続閾値: 20px（厳密に）

### 手書きが不明瞭な場合
- 検出信頼度: 0.30-0.40（感度を上げる）
- 高さ揃え閾値: 15px（緩く）
- 接続閾値: 40px（緩く）

## 🔧 トラブルシューティング

### 要素が検出されない
→ 検出信頼度を下げる（0.30程度）
→ 画像のコントラストを上げる
→ より明瞭に描き直す

### 支点と梁が接続されない
→ 接続閾値を上げる（30-40px）
→ 手書き図面で支点と梁を近づける

### 解析エラーが出る
→ 支点が不足していないか確認
→ 構造が不安定でないか確認
→ 荷重が正しく配置されているか確認

### 応力図が表示されない
→ 荷重が適用されているか確認
→ 材料特性が適切か確認

## 💡 ヒント

1. **段階的に構築**: 最初は単純な構造から始める
2. **パラメータ調整**: 結果を見ながら少しずつ調整
3. **清書画像を確認**: 要素が正しく認識されているか確認
4. **節点番号を確認**: 接続が正しいか節点番号で確認

## 📊 出力の見方

### 変形図
- 灰色: 元の形状
- 赤色: 変形後の形状
- 変形は拡大表示されています

### 応力図
- 青色: 軸力図（引張/圧縮）
- 緑色: せん断力図
- 赤色: 曲げモーメント図
- 塗りつぶし部分が応力の大きさを表します

### 符号規則
- 軸力: 引張が正、圧縮が負
- せん断力: 部材座標系での正負
- 曲げモーメント: 反時計回りが正

## 🌐 Streamlit Cloudへのデプロイ

### 準備
1. GitHubリポジトリを作成
2. 以下のファイルをコミット：
   - `structural_analysis_app.py`
   - `fem_lib.py`
   - `draw_lib.py`
   - `requirements.txt`
   - `packages.txt`
   - `.streamlit/config.toml`

### デプロイ手順
1. [Streamlit Cloud](https://streamlit.io/cloud)にアクセス
2. GitHubアカウントでログイン
3. 「New app」をクリック
4. リポジトリとブランチを選択
5. Main file path: `structural_analysis_app.py`
6. 「Deploy!」をクリック

### 注意事項
⚠️ モデルファイル（best.pt）とテンプレート画像は、GitHubにアップロードするか、別途ホスティングする必要があります。
⚠️ ファイルサイズが大きい場合は、Git LFSの使用を検討してください。

## 📞 サポート

問題が発生した場合は、以下を確認してください：
1. すべての必要なファイルが存在するか
2. モデルとテンプレートのパスが正しいか
3. 必要なライブラリがインストールされているか

テストスクリプトで環境を確認：
```bash
python test_app.py
```

## 🎓 学習リソース

- 構造力学の基礎: 支点、荷重、応力の概念
- 有限要素法: 剛性マトリクス法の理論
- YOLOv8: 物体検出モデルの仕組み
- Streamlit: Webアプリ開発の基礎

---

**開発者**: 森本遥香 (DA22340)  
**バージョン**: 1.0.0  
**最終更新**: 2025年
